(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,a){},203:function(e,t,a){},204:function(e,t,a){},205:function(e,t,a){},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(80),c=a.n(o),l=a(8),i=(a(89),a(39)),s=a(40),d=a(2),u=a(3),m=a(5),f=a(4),h=a(6),p=a(16),v=a(26),N=a(25);a(90);function E(e){e.tag,e.className,e.childrenm;var t=Object(N.a)(e,["tag","className","childrenm"]);return r.a.createElement(e.tag,Object(v.a)({className:["NavAddButton",e.className].join(" ")},t),e.children)}E.defaultProps={tag:"a"};var b=r.a.createContext({notes:[],folders:[],addFolder:function(){},addNote:function(){},deleteNote:function(){}}),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})},O=(a(91),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.context,t=e.folders,a=void 0===t?[]:t,n=e.notes,o=void 0===n?[]:n;return r.a.createElement("div",{className:"NoteListNav"},r.a.createElement("ul",{className:"NoteListNav__list"},a.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(l.c,{className:"NoteListNav__folder-link",to:"/folder/".concat(e.id)},r.a.createElement("span",{className:"NoteListNav__num-notes"},function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter(function(e){return e.folderId===t}).length}(o,e.id)),e.name))})),r.a.createElement("div",{className:"NoteListNav__button-wrapper"},r.a.createElement(E,{tag:l.b,to:"/add-folder",type:"button",className:"NoteListNav__add-folder-button"},"Add Folder",r.a.createElement("br",null))))}}]),t}(r.a.Component));O.contextType=b;var y=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).state={hasError:!1},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("h2",null,"There was an error."):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(n.Component),g=(a(100),function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.context,a=t.notes,n=t.folders,o=this.props.match.params.noteId,c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})}(n,(j(a,o)||{}).folderId);return r.a.createElement("div",{className:"NotePageNav"},r.a.createElement(y,null,r.a.createElement(E,{tag:"button",role:"link",onClick:function(){return e.props.history.goBack()},className:"NotePageNav__back-button"},r.a.createElement("br",null),"Back"),c&&r.a.createElement("h3",{className:"NotePageNav__folder-name"},c.name)))}}]),t}(r.a.Component));g.defaultProps={history:{goBack:function(){}},match:{params:{}}},g.contextType=b;var k=a(83),_={API_ENDPOINT:"http://localhost:9090"},w=(a(203),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleClickDelete=function(e){e.preventDefault();var t=a.props.id;fetch("".concat(_.API_ENDPOINT,"/notes/").concat(t),{method:"DELETE",headers:{"content-type":"application/json"}}).then(function(e){return e.ok?e.json():e.json().then(function(e){return Promise.reject(e)})}).then(function(){a.context.deleteNote(t),a.props.onDeleteNote(t)}).catch(function(e){console.error({error:e})})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.id,n=e.modified;return r.a.createElement("div",{className:"Note"},r.a.createElement("h2",{className:"Note__title"},r.a.createElement(l.b,{to:"/note/".concat(a)},t)),r.a.createElement("button",{className:"Note__delete",type:"button",onClick:this.handleClickDelete}," ","remove"),r.a.createElement("div",{className:"Note__dates"},r.a.createElement("div",{className:"Note__dates-modified"},"Modified"," ",r.a.createElement("span",{className:"Date"},Object(k.format)(n,"Do MMM YYYY")))))}}]),t}(r.a.Component));w.defaultProps={onDeleteNote:function(){}},w.contextType=b;a(204);var P=function(e){function t(){return Object(d.a)(this,t),Object(m.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.props.match.params.folderId,t=this.context.notes,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter(function(e){return e.folderId===t}):e}(void 0===t?[]:t,e);return r.a.createElement("section",{className:"NoteListMain"},r.a.createElement(y,null,r.a.createElement("ul",null,a.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(w,{id:e.id,name:e.name,modified:e.modified}))})),r.a.createElement("div",{className:"NoteListMain__button-container"},r.a.createElement(E,{tag:l.b,to:"/add-note",type:"button",className:"NoteListMain__add-note-button"},"Add Note",r.a.createElement("br",null)))))}}]),t}(r.a.Component);P.defaultProps={match:{params:{}}},P.contextType=b;a(205);var S=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).handleDeleteNote=function(e){a.props.history.push("/")},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this.context.notes,t=void 0===e?[]:e,a=this.props.match.params.noteId,n=j(t,a)||{content:""};return r.a.createElement("section",{className:"NotePageMain"},r.a.createElement(y,null,r.a.createElement(w,{id:n.id,name:n.name,modified:n.modified,onDeleteNote:this.handleDeleteNote}),r.a.createElement("div",{className:"NotePageMain__content"},n.content.split(/\n \r|\n/).map(function(e,t){return r.a.createElement("p",{key:t},e)}))))}}]),t}(r.a.Component);S.defaultProps={match:{params:{}}},S.contextType=b;a(206);function D(e){var t=e.className,a=Object(N.a)(e,["className"]);return r.a.createElement("form",Object.assign({className:["Noteful-form",t].join(" "),action:"#"},a))}a(207);var F=function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={error:null},a.handleFolderSubmit=function(e){e.preventDefault();var t=e.target.name,n={name:t.value};a.setState({error:null});var r={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(n)};fetch("http://localhost:9090/folders",r).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(e){t.value="",a.props.addNewFolder(e),a.props.history.push("/")}).catch(function(e){a.setState({error:e.message})})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("section",{className:"AddFolder"},r.a.createElement(y,null,r.a.createElement("h2",null,"Create a folder"),r.a.createElement(D,{onSubmit:this.handleFolderSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"name-input"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name"})),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"submit"},"Add folder")))))}}]),t}(n.Component),A=Object(p.d)(F);function I(e){return e.hasError?r.a.createElement("div",{className:"error"},e.message):r.a.createElement(r.a.Fragment,null)}a(208);var C=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(f.a)(t).call(this,e))).handleNoteSubmit=function(e){e.preventDefault();var t=e.target,n=t.name,r=t.selectedFolder,o=t.content,c={name:n.value,folderId:r.value,content:o.value,modified:Date.now()},l={method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(c)};a.setState({error:null}),fetch("http://localhost:9090/notes",l).then(function(e){if(!e.ok)throw new Error("Something went wrong, please try again later");return e.json()}).then(function(e){a.props.addNewNote(e),a.props.history.push("/")}).catch(function(e){a.setState({error:e.message})})},a.state={name:"",nameValid:!1,formValid:!1,validationMessage:{name:""}},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"verifyNameLength",value:function(e){var t=this;this.setState({name:e},function(){t.validateName(e)})}},{key:"validateName",value:function(e){var t=Object(v.a)({},this.state.validationMessage),a=!1;0===(e=e.trim()).length?(t.name="A note name is required.",a=!0):(t.name="",a=!1),this.setState({validationMessage:t,nameValid:!a},this.formValid)}},{key:"formValid",value:function(){this.setState({formValid:this.state.nameValid})}},{key:"render",value:function(){var e=this,t=this.props.folders;return r.a.createElement("section",{className:"AddNote"},r.a.createElement(y,null,r.a.createElement("h2",null,"Create a note"),r.a.createElement(D,{onSubmit:this.handleNoteSubmit},r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"note-name-input"},"Name"),r.a.createElement("input",{type:"text",id:"name",name:"name",onChange:function(t){return e.verifyNameLength(t.target.value)}}),r.a.createElement(I,{hasError:!this.state.nameVaild,message:this.state.validationMessage.name})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"note-content-input"},"Content"),r.a.createElement("textarea",{id:"content",name:"content"})),r.a.createElement("div",{className:"field"},r.a.createElement("label",{htmlFor:"note-folder-select"},"Folder"),r.a.createElement("select",{id:"selectedFolder",name:"selectedFolder"},r.a.createElement("option",{value:null},"..."),t.map(function(e){return r.a.createElement("option",{key:e.id,value:e.id},e.name)}))),r.a.createElement("div",{className:"buttons"},r.a.createElement("button",{type:"submit",disabled:!this.state.formValid},"Add note")))))}}]),t}(n.Component),x=Object(p.d)(C),M=(a(209),function(e){function t(){var e,a;Object(d.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(f.a)(t)).call.apply(e,[this].concat(r)))).state={notes:[],folders:[]},a.addNewFolder=function(e){a.setState({folders:[].concat(Object(s.a)(a.state.folders),[e])})},a.addNewNote=function(e){a.setState({notes:[].concat(Object(s.a)(a.state.notes),[e])})},a.handleDeleteNote=function(e){a.setState({notes:a.state.notes.filter(function(t){return t.id!==e})})},a}return Object(h.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;Promise.all([fetch("".concat(_.API_ENDPOINT,"/notes")),fetch("".concat(_.API_ENDPOINT,"/folders"))]).then(function(e){var t=Object(i.a)(e,2),a=t[0],n=t[1];return a.ok?n.ok?Promise.all([a.json(),n.json()]):n.json().then(function(e){return Promise.reject(e)}):a.json().then(function(e){return Promise.reject(e)})}).then(function(t){var a=Object(i.a)(t,2),n=a[0],r=a[1];e.setState({notes:n,folders:r})}).catch(function(e){console.error({error:e})})}},{key:"renderNavRoutes",value:function(){return r.a.createElement(r.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return r.a.createElement(p.a,{exact:!0,key:e,path:e,component:O})}),r.a.createElement(p.a,{path:"/note/:noteId",component:g}),r.a.createElement(p.a,{path:"/add-folder",component:g}),r.a.createElement(p.a,{path:"/add-note",component:g}))}},{key:"renderMainRoutes",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return r.a.createElement(p.a,{exact:!0,key:e,path:e,component:P})}),r.a.createElement(p.a,{path:"/note/:noteId",component:S}),r.a.createElement(p.a,{path:"/add-folder",render:function(t){return r.a.createElement(A,{addNewFolder:e.addNewFolder})}}),r.a.createElement(p.a,{path:"/add-note",render:function(t){return r.a.createElement(x,{addNewNote:e.addNewNote,folders:e.state.folders})}}))}},{key:"render",value:function(){var e={notes:this.state.notes,folders:this.state.folders,deleteNote:this.handleDeleteNote};return r.a.createElement(b.Provider,{value:e},r.a.createElement("div",{className:"App"},r.a.createElement("nav",{className:"App__nav"},this.renderNavRoutes()),r.a.createElement("header",{className:"App__header"},r.a.createElement("h1",null,r.a.createElement(l.b,{to:"/"},"Noteful")," ")),r.a.createElement("main",{className:"App__main"},this.renderMainRoutes())))}}]),t}(n.Component)),T=Object(p.d)(M);c.a.render(r.a.createElement(l.a,null,r.a.createElement(T,null)),document.getElementById("root"))},84:function(e,t,a){e.exports=a(210)},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){}},[[84,1,2]]]);
//# sourceMappingURL=main.4225659f.chunk.js.map